# Footballay Core - Local Development Environment Configuration
# 로컬 개발 전용 설정 (Vite dev server + Spring Boot)
# 사용법: ./gradlew bootRun --args='--spring.profiles.active=local'

spring:
  # JPA 설정
  jpa:
    properties:
      hibernate:
        format_sql: true
        default_schema: footballay_core
    hibernate:
      ddl-auto: update
    open-in-view: false
  #    show-sql: true

  # DevTools
  devtools:
    restart:
      enabled: false

  # PostgreSQL 로컬 도커 (docker/dev/docker-compose.yml)
  datasource:
    url: jdbc:postgresql://localhost:5432/footballay_core?currentSchema=footballay_core
    username: dev
    password: dev1234
    driver-class-name: org.postgresql.Driver
    hikari:
      minimum-idle: 10
      maximum-pool-size: 10
      connection-timeout: 30000

  # Redis 로컬 도커
  data:
    redis:
      host: localhost
      port: 6379
      password: 1234

  # Quartz Scheduler
  quartz:
    job-store-type: jdbc
    jdbc:
      initialize-schema: never
    properties:
      org:
        quartz:
          scheduler:
            instanceName: FootballayScheduler
            instanceId: AUTO
          jobStore:
            class: org.springframework.scheduling.quartz.LocalDataSourceJobStore
            driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate
            tablePrefix: QRTZ_
            isClustered: false
          threadPool:
            class: org.quartz.simpl.SimpleThreadPool
            threadCount: 5

# Server 설정 (HTTP - 로컬 개발용)
server:
  port: 8083  # 개발 환경 기본 포트
  ssl:
    enabled: false  # 로컬은 HTTP 사용

  # Monitoring을 위한 Tomcat metrics 활성화
  tomcat:
    mbeanregistry:
      enabled: true
    threads:
      max: 80

  servlet:
    session:
      cookie:
        http-only: true
        secure: false       # HTTP이므로 false
        same-site: lax
        # domain 미설정 → host-only (localhost)

# Monitoring - Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics

# Logging
logging:
  level:
    root: info
    org:
      testcontainers: debug

# 로컬 개발 환경 CORS 출처
# Vite dev server(5173) → Spring Boot(8083) proxy 사용
cors:
  allowedorigins: "http://localhost:5173,http://localhost:8083,http://localhost:8080,http://localhost:1212,http://localhost:7777"

custom:
  cookie:
    domain: "localhost"
  login:
    main-domain-enabled: false
    base-url: "https://localhost:8083/login"
    remember-me-key: remember-me-key-only-for-local

# AWS Mock 값 (Bean 생성용)
aws:
  cloudfront:
    domain: "https://static.gyechunhoe.com"
    keyPairId: "MOCKKEYPAIRID"
    privateKeyPath: classpath:MOCKPATHTHISISNOTREAL
    publicKeyPath: classpath:MOCKPATHTHISISNOTREAL
  s3:
    accessKey: AMOCKACCESSKEYZ
    secretKey: XAMOCKSECRETKEYZ
    region: ap-northeast-2
    bucket-name: MOCK-BUCKET-NAME
    public-domain: "https://static.MOCKDOMAINqk20ejkt01ke03.com"

# Mock API 설정 (기본값, devrealapi 프로파일로 오버라이드 가능)
footballay:
  apisports:
    scheme: https
    host: mock.api-sports.io
    headers:
      x-rapidapi-host-name: 'X-RapidAPI-Host'
      x-rapidapi-host-value: 'mock.api-sports.io'
      x-rapidapi-key-name: 'X-RapidAPI-Key'
      x-rapidapi-key-value: 'mock-api-key'

# Mock 경로 설정
path:
  football:
    players:
      photo:
        prefix: "chuncity/dev/players"
        suffix: "devphoto"
